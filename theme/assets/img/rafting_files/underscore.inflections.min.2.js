(function(){var g,e,d=function(c,b){return function(){return c.apply(b,arguments)}},k=[].slice;g=function(){function c(){this.apply_inflections=d(this.apply_inflections,this);this.singularize=d(this.singularize,this);this.pluralize=d(this.pluralize,this);this.clearInflections=d(this.clearInflections,this);this.uncountable=d(this.uncountable,this);this.irregular=d(this.irregular,this);this.singular=d(this.singular,this);this.plural=d(this.plural,this);this.applyDefaultPlurals=d(this.applyDefaultPlurals,
this);this.applyDefaultUncountables=d(this.applyDefaultUncountables,this);this.applyDefaultRules=d(this.applyDefaultRules,this);this.plurals=[];this.singulars=[];this.uncountables=[];this.applyDefaultRules()}c.prototype.defaultPluralRules=[[/$/,"s"],[/([sxz]|[cs]h)$/i,"$1es"],[/([^aeiouy]o)$/i,"$1es"],[/([^aeiouy])y$/i,"$1ies"]];c.prototype.defaultSingularRules=[[/s$/i,""],[/(ss)$/i,"$1"],[/([sxz]|[cs]h)es$/,"$1"],[/([^aeiouy]o)es$/,"$1"],[/([^aeiouy])ies$/i,"$1y"]];c.prototype.defaultIrregularRules=
[["person","people"],["child","children"],["self","selves"]];c.prototype.defaultUncountables=["series"];c.prototype.applyDefaultRules=function(){this.applyDefaultUncountables();this.applyDefaultPlurals();this.applyDefaultSingulars();return this.applyDefaultIrregulars()};c.prototype.applyDefaultUncountables=function(){return this.uncountable(this.defaultUncountables)};c.prototype.applyDefaultPlurals=function(){var b=this;return e.each(this.defaultPluralRules,function(a){return b.plural(a[0],a[1])})};
c.prototype.applyDefaultSingulars=function(){var b=this;return e.each(this.defaultSingularRules,function(a){return b.singular(a[0],a[1])})};c.prototype.applyDefaultIrregulars=function(){var b=this;return e.each(this.defaultIrregularRules,function(a){return b.irregular(a[0],a[1])})};c.prototype.plural=function(b,a){"string"===typeof b&&delete this.uncountables[e.indexOf(this.uncountables,b)];delete this.uncountables[e.indexOf(this.uncountables,a)];return this.plurals.unshift([b,a])};c.prototype.singular=
function(b,a){"string"===typeof b&&delete this.uncountables[e.indexOf(this.uncountables,b)];delete this.uncountables[e.indexOf(this.uncountables,a)];return this.singulars.unshift([b,a])};c.prototype.irregular=function(b,a){delete this.uncountables[e.indexOf(this.uncountables,b)];delete this.uncountables[e.indexOf(this.uncountables,a)];if(b.substring(0,1).toUpperCase()===a.substring(0,1).toUpperCase())return this.plural(RegExp("("+b.substring(0,1)+")"+b.substring(1,a.length)+"$","i"),"$1"+a.substring(1,
a.length)),this.plural(RegExp("("+a.substring(0,1)+")"+a.substring(1,a.length)+"$","i"),"$1"+a.substring(1,a.length)),this.singular(RegExp("("+a.substring(0,1)+")"+a.substring(1,a.length)+"$","i"),"$1"+b.substring(1,a.length));this.plural(RegExp(""+b.substring(0,1)+b.substring(1,a.length)+"$","i"),a.substring(0,1)+a.substring(1,a.length));this.plural(RegExp(""+b.substring(0,1)+b.substring(1,a.length)+"$","i"),a.substring(0,1)+a.substring(1,a.length));this.plural(RegExp(""+a.substring(0,1)+a.substring(1,
a.length)+"$","i"),a.substring(0,1)+a.substring(1,a.length));this.plural(RegExp(""+a.substring(0,1)+a.substring(1,a.length)+"$","i"),a.substring(0,1)+a.substring(1,a.length));this.singular(RegExp(""+a.substring(0,1)+a.substring(1,a.length)+"$","i"),b.substring(0,1)+b.substring(1,a.length));return this.singular(RegExp(""+a.substring(0,1)+a.substring(1,a.length)+"$","i"),b.substring(0,1)+b.substring(1,a.length))};c.prototype.uncountable=function(){var b;b=1<=arguments.length?k.call(arguments,0):[];
this.uncountables.push(b);return this.uncountables=e.flatten(this.uncountables)};c.prototype.clearInflections=function(b){null==b&&(b="all");return this[b]=[]};c.prototype.pluralize=function(b,a,c){var d,f;null==c&&(c={});c=e.extend({plural:void 0,showNumber:!0},c);return void 0!==a?(d="",!0===c.showNumber&&(d+=""+(null!=a?a:0)+" "),d+(1===a||null!=a&&"function"===typeof a.toString&&a.toString().match(/^1(\.0+)?$/)?b:null!=(f=c.plural)?f:this.pluralize(b))):this.apply_inflections(b,this.plurals)};
c.prototype.singularize=function(b){return this.apply_inflections(b,this.singulars)};c.prototype.apply_inflections=function(b,a){var c,d,f,h,g;if(b){f=b;d=f.toLowerCase().match(/\b\w+$/);if(!d||-1===e.indexOf(this.uncountables,d[0]))for(h=0,g=a.length;h<g;h++)if(c=a[h],d=c[0],c=c[1],f.match(d)){f=f.replace(d,c);break}return f}return b};return c}();e=("undefined"!==typeof exports&&null!==exports?exports:this)._||require("underscore");"undefined"===typeof exports?e.mixin(new g):module.exports=new g}).call(this);
